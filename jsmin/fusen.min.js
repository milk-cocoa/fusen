!function(s){function t(s,t){this.canvas=s,this.ds=t,this.fusens={}}function i(s,t,i,e,o){var n=this;this.id=i,this.ds=t,this.pos={x:0,y:0},this.canvas=s,this.canvas.append("mobile"==fusen_util.getDevice()?'<div id="'+this.id+'" class="p-husen theme-husen--'+o+'">'+fusen_util.htmlEscape(e)+"</div>":'<div id="'+this.id+'" class="p-husen theme-husen--'+o+'">'+fusen_util.htmlEscape(e)+'<div class="p-husen__cross">×</div></div>');var d=$(".p-husen__cross","#"+this.id);if($("#"+this.id).draggable({start:function(){},drag:function(){n.pos.x=$("#"+n.id).position().left,n.pos.y=$("#"+n.id).position().top},stop:function(){n.ds.set(n.id,{x:n.pos.x,y:n.pos.y}),n.setPos(n.pos.x,n.pos.y)}}),d.click(function(s){n.ds.remove(n.id),s.stopPropagation()}),"mobile"==fusen_util.getDevice()){var h=720;$("#"+n.id).bind("touchstart",function(s){function t(){clearTimeout(timer)}timer=setTimeout(function(){confirm("このメッセージを削除しますか？")===!0&&n.ds.remove(n.id)},h),$("#"+n.id).bind("touchend touchmove touchcancel",t),s.stopPropagation()})}}t.prototype.getFusen=function(s){return this.fusens[s]},t.prototype.createFusen=function(s,t,e){var o=new i(this.canvas,this.ds,s,t,e);return this.fusens[s]=o,o},i.prototype.setPos=function(s,t){var i=this;i.pos.x=s,i.pos.y=t,$("#"+this.id).offset({top:i.pos.y,left:i.pos.x}),i.pos.y+$("#"+i.id).height()>i.canvas.height()&&i.canvas.css("height",i.pos.y+$("#"+i.id).outerHeight()+"px"),i.pos.x+$("#"+i.id).width()>i.canvas.width()&&(i.canvas.css("width",i.pos.x+$("#"+i.id).outerWidth()+"px"),$("#header").css("width",i.pos.x+$("#"+i.id).outerWidth()+"px"))},i.prototype.removeSelf=function(){var s=this;$("#"+s.id).remove()},s.FusenBuilder=t,s.Fusen=i}(window);